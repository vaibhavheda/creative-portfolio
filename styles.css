/* ── Animatable custom properties (Houdini) ─────────────────── */
@property --bg-start { syntax: '<color>'; inherits: true; initial-value: #130d0a; }
@property --bg-end   { syntax: '<color>'; inherits: true; initial-value: #070608; }

/* ── Theme variables ─────────────────────────────────────────── */
:root {
  --bg-start:  #130d0a;
  --bg-end:    #070608;
  --fg:        #d0cac2;
  --fg-muted:  #585450;
  --fg-dim:    #787068;
  --accent:    #d4b09a;
  --stroke:    #b8b2aa;
  --border:    #252220;
  --fill:      #d0cac2;
  --fill-text: #080608;
  --panel-bg:  rgba(7,6,8,0.96);
  --card-bg:   rgba(10,8,9,0.88);
  --dot-ring:  #383530;
  --dot-active:#1fc94e;
}
body.theme-tide {
  --bg-start:  #090e15;
  --bg-end:    #030508;
  --fg:        #c4d8e8;
  --fg-muted:  #485870;
  --fg-dim:    #607888;
  --accent:    #7ab0cc;
  --stroke:    #7aa8c4;
  --border:    #182434;
  --fill:      #c4d8e8;
  --fill-text: #030810;
  --panel-bg:  rgba(3,5,10,0.96);
  --card-bg:   rgba(5,8,14,0.88);
  --dot-ring:  #283848;
  --dot-active:#1fc9c0;
}
body.theme-moss {
  --bg-start:  #090d0a;
  --bg-end:    #030506;
  --fg:        #c0d8c4;
  --fg-muted:  #485850;
  --fg-dim:    #607868;
  --accent:    #80b890;
  --stroke:    #80a890;
  --border:    #18241a;
  --fill:      #c0d8c4;
  --fill-text: #030806;
  --panel-bg:  rgba(4,6,5,0.96);
  --card-bg:   rgba(6,10,7,0.88);
  --dot-ring:  #283828;
  --dot-active:#1fc98e;
}
body.theme-void {
  --bg-start:  #0d0d0d;
  --bg-end:    #050505;
  --fg:        #d0d0d0;
  --fg-muted:  #585858;
  --fg-dim:    #787878;
  --accent:    #b0b0b0;
  --stroke:    #909090;
  --border:    #222222;
  --fill:      #d0d0d0;
  --fill-text: #080808;
  --panel-bg:  rgba(5,5,5,0.96);
  --card-bg:   rgba(8,8,8,0.88);
  --dot-ring:  #303030;
  --dot-active:#d8d8d8;
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

html, body {
  width: 100%; height: 100%;
  background: radial-gradient(ellipse at 64% 50%, var(--bg-start) 0%, var(--bg-end) 65%);
  overflow: hidden;
  font-family: 'Space Grotesk', sans-serif;
  -webkit-font-smoothing: antialiased;
  transition: --bg-start 0.6s ease, --bg-end 0.6s ease;
}

canvas { display: block; cursor: grab; }
canvas:active { cursor: grabbing; }

/* ── Name ─────────────────────────────────────────────────────── */
.name {
  position: fixed;
  top: 2.4rem; left: 2.5rem;
  line-height: 0.88;
  letter-spacing: -0.04em;
  font-family: 'Space Grotesk', sans-serif;
  font-weight: 700;
  pointer-events: none;
}
.name-v {
  font-size: clamp(3.2rem, 6.5vw, 6rem);
  color: var(--accent);
  transition: color 0.6s;
  line-height: 0.88;
}
.name-heda {
  display: block;
  font-size: clamp(3.2rem, 6.5vw, 6rem);
  color: transparent;
  -webkit-text-stroke: 1.5px var(--stroke);
  transition: -webkit-text-stroke-color 0.6s;
}

/* ── Projects — floating cards, desktop ─────────────────────── */
.projects {
  position: fixed;
  top: 5.2rem; right: 2.5rem;
  display: flex;
  flex-direction: column;
  gap: 0.6rem;
  z-index: 100;
  pointer-events: none;
}
.projects.open { pointer-events: auto; }

/* Cards hidden by default, slide in from right when open */
.project-card {
  display: flex;
  align-items: center;
  gap: 0.65rem;
  padding: 0.6rem 0.85rem;
  border: 1.5px dashed var(--border);
  border-radius: 0.5rem;
  text-decoration: none;
  position: relative;
  overflow: hidden;
  width: 220px;
  background: var(--card-bg);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  transform: translateX(calc(100% + 70px));
  opacity: 0;
  transition: transform 0.45s cubic-bezier(0,0.55,0.45,1),
              opacity 0.3s ease,
              border-color 0.4s cubic-bezier(0,0.55,0.45,1);
}
.projects.open .project-card {
  transform: translateX(0);
  opacity: 1;
  transition-delay: var(--delay, 0s);
}
.project-card::before {
  content: '';
  position: absolute; inset: 0;
  background: var(--accent);
  transform: translateY(105%);
  transition: transform 0.48s cubic-bezier(0,0.55,0.45,1);
}
.project-card:hover::before { transform: translateY(0); }
.project-card:hover { border-color: var(--accent); }
.project-card:hover .p-icon  { color: var(--fill-text); }
.project-card:hover .p-name  { color: var(--fill-text); }
.project-card:hover .p-domain { color: var(--fill-text); opacity: 0.5; }
.p-icon {
  position: relative; z-index: 1;
  width: 18px; height: 18px; flex-shrink: 0;
  color: var(--fg-dim); transition: color 0.4s;
}
.p-icon svg { width: 100%; height: 100%; display: block; }
.p-info { position: relative; z-index: 1; display: flex; flex-direction: column; gap: 0.08rem; }
.p-name {
  font-family: 'Space Mono', monospace;
  font-size: 0.6rem; color: var(--fg);
  letter-spacing: 0.02em; transition: color 0.4s;
}
.p-domain {
  font-family: 'Space Mono', monospace;
  font-size: 0.46rem; color: var(--fg-muted);
  letter-spacing: 0.04em; transition: color 0.4s, opacity 0.4s;
}

/* ── Projects trigger pill ────────────────────────────────────── */
#proj-btn {
  position: fixed;
  top: 2.4rem; right: 2.5rem;
  display: block;
  font-family: 'Space Mono', monospace;
  font-size: 0.55rem;
  color: var(--fg-dim);
  letter-spacing: 0.1em;
  border: 1.5px dashed var(--fg-muted);
  border-radius: 999px;
  padding: 0.45rem 1.1rem;
  background: transparent;
  cursor: pointer;
  white-space: nowrap;
  transition: color 0.35s, border-color 0.35s, border-style 0.35s;
  z-index: 101;
}
#proj-btn:hover { color: var(--fg); border-color: var(--fg-muted); }
#proj-btn.open {
  color: var(--fg);
  border-style: solid;
  border-color: var(--fg-muted);
}

/* ── Mobile: bottom drawer ────────────────────────────────────── */
@media (max-width: 800px) {
  .projects {
    top: auto; right: auto;
    bottom: 0; left: 0;
    width: 100%; height: auto;
    padding: 1.4rem 1.5rem 2.2rem;
    background: var(--panel-bg);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border-top: 1px solid var(--border);
    transform: translateY(110%);
    transition: transform 0.48s cubic-bezier(0,0.55,0.45,1);
  }
  .projects.open { transform: translateY(0); pointer-events: auto; }
  .project-card {
    transform: none !important; opacity: 1 !important;
    transition: border-color 0.4s !important;
    width: 100%; background: transparent;
    backdrop-filter: none; -webkit-backdrop-filter: none;
  }
}

/* ── Bottom-left ──────────────────────────────────────────────── */
.bottom-left {
  position: fixed;
  bottom: 2.5rem; left: 2.5rem;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}
.local-time-label {
  font-family: 'Space Mono', monospace;
  font-size: 0.6rem;
  color: var(--fg-dim);
  letter-spacing: 0.08em;
}
.clock-row {
  display: flex;
  align-items: flex-start;
  gap: 0.55rem;
}
.clock {
  font-family: 'Space Mono', monospace;
  font-weight: 700;
  font-size: clamp(2.2rem, 4vw, 3rem);
  color: var(--fg);
  letter-spacing: -0.03em;
  display: flex;
  align-items: baseline;
  line-height: 1;
  transition: color 0.6s;
}
.clock-colon { line-height: 1; padding: 0 0.02em; animation: colon-pulse 2s step-start infinite; }
@keyframes colon-pulse {
  0%, 49% { opacity: 1; }
  50%, 100% { opacity: 0.15; }
}
.digit {
  position: relative;
  overflow: hidden;
  display: inline-block;
  height: 1.05em;
  vertical-align: top;
}
.digit::before { content: '0'; visibility: hidden; display: block; line-height: 1; }
.digit span { position: absolute; top: 0; left: 0; width: 100%; text-align: center; line-height: 1; }
@keyframes d-out { from { transform: translateY(0); }    to { transform: translateY(-115%); } }
@keyframes d-in  { from { transform: translateY(115%); } to { transform: translateY(0); } }

.ampm-indicator { display: flex; flex-direction: column; gap: 4px; margin-top: 5px; }
.ampm-indicator span {
  font-family: 'Space Mono', monospace;
  font-size: 0.45rem;
  color: var(--fg-muted);
  letter-spacing: 0.04em;
  transition: color 0.6s;
}
.dot-row { display: flex; align-items: center; gap: 5px; }
.dot {
  width: 7px; height: 7px;
  border-radius: 50%;
  border: 1.5px solid var(--dot-ring);
  flex-shrink: 0;
  transition: background 0.4s, border-color 0.4s;
}
.dot.active {
  background: var(--dot-active);
  border-color: var(--dot-active);
  animation: dot-breathe 2s ease-in-out infinite;
}
@keyframes dot-breathe {
  0%, 100% { opacity: 1;   box-shadow: 0 0 5px 1px color-mix(in srgb, var(--dot-active) 45%, transparent); }
  50%       { opacity: 0.2; box-shadow: none; }
}
.role-block { margin-top: 0.1rem; }
.role {
  font-family: 'Space Mono', monospace;
  font-size: 0.75rem;
  color: var(--fg-dim);
  letter-spacing: 0.1em;
  text-transform: uppercase;
  transition: color 0.6s;
}
.location {
  font-family: 'Space Mono', monospace;
  font-size: 0.7rem;
  color: var(--fg-dim);
  margin-top: 0.25rem;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  transition: color 0.6s;
}

/* ── Theme switcher — bottom center ──────────────────────────── */
.theme-switcher {
  position: fixed;
  bottom: 2.5rem;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  flex-direction: row;
  gap: 0.65rem;
  align-items: center;
  z-index: 10;
}
.theme-dot {
  width: 8px; height: 8px;
  border-radius: 50%;
  cursor: pointer;
  padding: 0;
  border: 1.5px solid transparent;
  opacity: 0.35;
  transition: opacity 0.2s, transform 0.2s, box-shadow 0.2s;
}
.theme-dot[data-theme="dusk"] { background: #d4b09a; }
.theme-dot[data-theme="tide"] { background: #7ab0cc; }
.theme-dot[data-theme="moss"] { background: #80b890; }
.theme-dot[data-theme="void"] { background: #b0b0b0; }
.theme-dot:hover { opacity: 0.75; transform: scale(1.25); }
.theme-dot.active { opacity: 1; transform: scale(1.15); }
.theme-dot[data-theme="dusk"].active { border-color: #d4b09a; box-shadow: 0 0 5px 1px rgba(212,176,154,0.5); }
.theme-dot[data-theme="tide"].active { border-color: #7ab0cc; box-shadow: 0 0 5px 1px rgba(122,176,204,0.5); }
.theme-dot[data-theme="moss"].active { border-color: #80b890; box-shadow: 0 0 5px 1px rgba(128,184,144,0.5); }
.theme-dot[data-theme="void"].active { border-color: #b0b0b0; box-shadow: 0 0 5px 1px rgba(176,176,176,0.5); }

/* ── Links ────────────────────────────────────────────────────── */
.links {
  position: fixed;
  bottom: 2.5rem; right: 2.5rem;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
  gap: 0.55rem;
}
.links a {
  font-family: 'Space Mono', monospace;
  font-size: 0.62rem;
  color: var(--fg-dim);
  text-decoration: none;
  letter-spacing: 0.06em;
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.52rem 1.25rem;
  border: 1.5px dashed var(--fg-muted);
  border-radius: 999px;
  overflow: hidden;
  transition: color 0.45s cubic-bezier(0,0.55,0.45,1),
              border-color 0.45s cubic-bezier(0,0.55,0.45,1);
}
.links a::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--fill);
  transform: translateY(105%);
  transition: transform 0.5s cubic-bezier(0,0.55,0.45,1);
}
.links a:hover { color: var(--fill-text); border-color: var(--fill); }
.links a:hover::before { transform: translateY(0); }
.links a span { position: relative; z-index: 1; }

.links button {
  font-family: 'Space Mono', monospace;
  font-size: 0.62rem;
  color: var(--fg-dim);
  text-decoration: none;
  letter-spacing: 0.06em;
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.52rem 1.25rem;
  border: 1.5px dashed var(--fg-muted);
  border-radius: 999px;
  overflow: hidden;
  background: transparent;
  cursor: pointer;
  transition: color 0.45s cubic-bezier(0,0.55,0.45,1),
              border-color 0.45s cubic-bezier(0,0.55,0.45,1);
}
.links button::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--fill);
  transform: translateY(105%);
  transition: transform 0.5s cubic-bezier(0,0.55,0.45,1);
}
.links button:hover { color: var(--fill-text); border-color: var(--fill); }
.links button:hover::before { transform: translateY(0); }
.links button span { position: relative; z-index: 1; }

/* ── Doc Bot SOON badge ───────────────────────────────────────── */
.soon-badge {
  font-family: 'Space Mono', monospace;
  font-size: 0.38rem;
  letter-spacing: 0.08em;
  color: var(--fg-muted);
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: 0.18rem 0.45rem;
  position: absolute;
  top: 0.35rem;
  right: 0.45rem;
  z-index: 1;
}

/* ── Drag hint overlay — full screen, auto-fades ─────────────── */
#drag-hint {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  z-index: 200;
  opacity: 1;
  transition: opacity 0.9s ease;
}
#drag-hint.gone { opacity: 0; }

/* ── Reduced motion ───────────────────────────────────────────── */
@media (prefers-reduced-motion: reduce) {
  @keyframes d-out { from { opacity: 1; } to { opacity: 0; } }
  @keyframes d-in  { from { opacity: 0; } to { opacity: 1; } }
  .project-card, .links a, .links button, .project-card::before, .links a::before, .links button::before {
    transition-duration: 0.01ms !important;
  }
  .dot.active { animation: none; }
  .clock-colon { animation: none; }
}
#drag-hint span {
  font-family: 'Space Mono', monospace;
  font-size: 0.6rem;
  color: var(--fg);
  letter-spacing: 0.16em;
  padding: 0.55rem 1.4rem;
  background: rgba(0,0,0,0.55);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 999px;
}
